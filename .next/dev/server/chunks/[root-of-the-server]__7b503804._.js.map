{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Portal%20All%20Clean%20Masters/CleanMasters2/lib/prisma.ts"],"sourcesContent":["// ============================================\n// LIB/PRISMA.TS\n// ============================================\n// ðŸ†• NUEVO - Copiar a: CleanMasters2/lib/prisma.ts\n\nimport { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA,+CAA+C;AAC/C,gBAAgB;AAChB,+CAA+C;AAC/C,mDAAmD;AAEnD;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/Portal%20All%20Clean%20Masters/CleanMasters2/app/api/crews/route.ts"],"sourcesContent":["// ============================================\n// APP/API/CREWS/ROUTE.TS\n// ============================================\n// ðŸ”„ REEMPLAZAR existente\n// UbicaciÃ³n: CleanMasters2/app/api/crews/route.ts\n\nimport { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport async function GET(req: NextRequest) {\n  try {\n    const { searchParams } = req.nextUrl\n    const includeMembers = searchParams.get('includeMembers') === 'true'\n    const includeStats = searchParams.get('includeStats') === 'true'\n\n    const crews = await prisma.crew.findMany({\n      include: {\n        members: includeMembers,\n        ...(includeStats && {\n          appointments: {\n            where: { status: 'COMPLETED' },\n            select: { id: true }\n          }\n        })\n      },\n      orderBy: { name: 'asc' }\n    })\n\n    return NextResponse.json(crews)\n  } catch (error) {\n    console.error('GET crews error:', error)\n    return NextResponse.json({ error: 'Failed to fetch crews' }, { status: 500 })\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n\n    const crew = await prisma.crew.create({\n      data: {\n        name: body.name,\n        color: body.color || '#3B82F6',\n        isActive: body.isActive !== false\n      },\n      include: {\n        members: true\n      }\n    })\n\n    return NextResponse.json(crew, { status: 201 })\n  } catch (error) {\n    console.error('POST crew error:', error)\n    return NextResponse.json({ error: 'Failed to create crew' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA,+CAA+C;AAC/C,yBAAyB;AACzB,+CAA+C;AAC/C,0BAA0B;AAC1B,kDAAkD;AAElD;AACA;;;AAEO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,OAAO;QACpC,MAAM,iBAAiB,aAAa,GAAG,CAAC,sBAAsB;QAC9D,MAAM,eAAe,aAAa,GAAG,CAAC,oBAAoB;QAE1D,MAAM,QAAQ,MAAM,yHAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YACvC,SAAS;gBACP,SAAS;gBACT,GAAI,gBAAgB;oBAClB,cAAc;wBACZ,OAAO;4BAAE,QAAQ;wBAAY;wBAC7B,QAAQ;4BAAE,IAAI;wBAAK;oBACrB;gBACF,CAAC;YACH;YACA,SAAS;gBAAE,MAAM;YAAM;QACzB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBACJ,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK,IAAI;gBACrB,UAAU,KAAK,QAAQ,KAAK;YAC9B;YACA,SAAS;gBACP,SAAS;YACX;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}